

# 弱网优化

> 初版，基本思路都是按照下面来的

1. 合适的超时时间，针对不同网络设定不同的超时时间，加快超时，尽快重试
2. 按子模块多请求去拉取数据，避免一次性加载，导致数据太多请求返回慢；
3. 缓存和增量请求
4. **优化DNS查询：**应尽量减少DNS查询，做DNS缓存，避免域名劫持、DNS污染，同时把用户调度到“最优接入点”。
5. 减小数据包大小和优化包量：通过压缩、精简包头、消息合并等方式，来减小数据包大小和包量。
6. **优化ACK包：**平衡冗余包和ACK包个数，达到降低延时，提高吞吐量的目的。（这些难度有点高）
7. 断线重连，因为我们是 socket 通信的，所以需要做断线重连，重连时间可以递增
8. 减少数据连接的创建次数，由于创建连接是一个非常昂贵的操作，所以应尽量**减少数据连接的创建次数**，且在一次请求中应尽量以批量的方式执行任务。如果多次发送小数据包，应该尽量保证在2秒以内发送出去。在短时间内访问不同服务器时，尽可能地复用无线连接。
9. 用户 UI 体验优化，加载一些动画什么的分散下注意力
10. **根据不同网络情况动态调节方案，比如图片下载和视频流就可以按照 3G 4G 和 WIFI 进行区分返回**
11. HTTP3.0